<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.mybatisMapper">
    <select id="selectAll" resultType="com.example.demo.client.model.DeptVO" >
        SELECT * FROM client_list;
    </select>

    <update id="updateClientInfo" parameterType="com.example.demo.client.model.ClientVO">
        UPDATE client_list
        SET nickName=#{nickName},pw=#{pw},alarm_push=#{alarm_push},alarm_mail=#{alarm_mail},alarm_SMS=#{alarm_SMS}
        WHERE client_key=#{client_key}
    </update>

    <delete id="deleteClientInfo" parameterType="int">
        DELETE FROM client_list
        WHERE client_key=#{client_key}
    </delete>

    <select id="selectCategoryShow" parameterType="String" resultType="com.example.demo.all.model.OwnerCouponShowVO">
        SELECT *
        FROM owner_have_coupon_view
        WHERE category=#{category}
    </select>

    <select id="selectMarketInfo" parameterType="int" resultType="com.example.demo.all.model.OwnerInfoMarketGetVO">
        SELECT market_name,user_key,address,introduce,phone
        FROM coupon_view
        WHERE coupon_key=#{coupon_key}
    </select>

    <insert id="clientSignup" parameterType="com.example.demo.client.model.ClientVO">
        INSERT INTO client_list(client_key,who_key,ID,PW,nickName,PHONE,alarm_push,alarm_mail,alarm_SMS,gender,birth)
        VALUES (#{client_key},"C",#{id},#{pw},#{nickName},#{phone},#{alarm_push},#{alarm_mail},#{alarm_SMS},#{gender},#{birth})
    </insert>

    <select id="selectClientHaveCoupon" parameterType="int" resultType="com.example.demo.client.model.ClientCouponVO">
        SELECT *
        FROM client_have_coupon_view
        WHERE client_key = #{client_key}
    </select>

    <select id="selectClientLogin" parameterType="com.example.demo.client.model.ClientLoginVO" resultType="com.example.demo.client.model.ClientVO">
        SELECT *
        FROM client_list
        WHERE id=#{id} and pw=#{pw}
    </select>

    <select id="selectOwnerLogin" parameterType="com.example.demo.owner.model.OwnerLoginVO" resultType="com.example.demo.owner.model.OwnerVO">
        SELECT *
        FROM owner_list
        WHERE id=#{id} and pw=#{pw}
    </select>
    
    <insert id="insertCouponList" parameterType="com.example.demo.owner.model.OwnerRegisterCouponVO">
        INSERT INTO coupon_list(coupon_key,start_date,expire_date,qualification,content,start_count,remain_count)
        VALUES(#{coupon_key},#{start_date},#{expire_date},#{qualification},#{content},#{start_count},#{remain_count})
    </insert>

    <insert id="insertOwnerRegisterCoupon" parameterType="com.example.demo.owner.model.OwnerRegisterCouponVO">
        INSERT INTO owner_coupon(owner_key,coupon_key)
        VALUES(#{owner_key},#{coupon_key})
    </insert>
</mapper>

